---
- hosts: all
  roles:
    - keyboard-layout
  vars:
    keyboard_layout: "us,bg"
    keyboard_variant: ",phonetic"
    
    user: vagrant
    toolsdir: "/home/vagrant/tools"
    qt_version_full: "5.14.1"

  tasks:
    - name: Create directory for Qt
      file: path="{{toolsdir}}/qt-{{qt_version_full}}/x86_64/" state=directory owner="{{user}}" group="{{user}}"

    - name: Download and extract Qt
      unarchive:
        src: "http://soracum.cerritus.eu/qt-{{qt_version_full}}-x86_64.tbz2"
        dest: "{{toolsdir}}/qt-{{qt_version_full}}/x86_64/"
        creates: "{{toolsdir}}/qt-{{qt_version_full}}/x86_64/bin"
        remote_src: yes

    - name: Install a QxOrm from .deb package
      apt:
        deb: /vagrant/requirements/QxOrm/QxOrm-1.4.7.deb
      become: true
      
    - name: Set Timezone to Europe/Sofia
      shell: timedatectl set-timezone Europe/Sofia
      become: true

    - name: Install Usefull Packages
      apt:
        name: ['mc', 'dos2unix', 'vim']
        state: present
      become: true

    - name: Terminate KDE Session
      shell: loginctl terminate-user "vagrant"

